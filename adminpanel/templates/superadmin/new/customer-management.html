{% extends 'superadmin/new/new-base.html' %}
{% block body %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<div class="WrapperArea">
    <div class="WrapperBox">
        <div class="content-wrapper">
            {% if messages %}
            {% for message in messages %}
            <div class="alert alert-success alert-dismissible fade in" role="alert">
                {{ message }}
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            {% endfor %}
            {% endif %}
        </div>
        <div class="Small-Wrapper">
            <h4 class="Title">Organization Management
                <a href="JavaScript:Void(0);" data-toggle="modal" data-target="#AddModal"> New Organization </a>
            </h4>
            <div class="FilterArea">
                <form method="get">
                    <div class="form-group">
                        <label>Organization Name</label>
                        <input type="text" class="form-control" placeholder="Enter Organization Name"
                               name="organization_name">
                    </div>
                    <div class="form-group">
                        <label>Person Name</label>
                        <input type="text" class="form-control" placeholder="Enter Person Name" name="first_name">
                    </div>
                    <div class="form-group">
                        <label>Email ID</label>
                        <input type="text" class="form-control" placeholder="Enter Email ID" name="email">
                    </div>
                    <div class="form-group">
                        <label>Mobile Number</label>
                        <input type="number" class="form-control" placeholder="Enter Mobile Number" name="mobile_number">
                    </div>
                    <div class="form-group">
                        <label>Client Code</label>
                        <input type="text" class="form-control" placeholder="Enter Client  Code" name="client_code">
                    </div>
                    <div class="form-group">
                        <label>Registered From</label>
                        <input type="date" class="form-control" placeholder="Enter Name" name="from_date">
                    </div>
                    <div class="form-group">
                        <label>Registered To</label>
                        <input type="date" class="form-control" placeholder="Enter Name" name="to_date">
                    </div>
                    <div class="form-group">
                        <label>&nbsp;</label>
                        <button class="Button Reset" type="reset"><i class="fa fa-refresh"></i></button>
                        <button class="Button" type="submit">Apply</button>
                    </div>
                </form>
            </div>
            {% if no_data %}
            <div class="TableList">
                <div class="CountExportArea">
                    <a href="{% url 'adminpanel:export-organization-data' %}" class="Export"><i
                            class="fa fa-file-excel-o"></i> Export </a>
                    <label>
                        Show per page
                        <select>
                            <option>5</option>
                            <option>10</option>
                            <option>20</option>
                            <option>50</option>
                            <option>100</option>
                        </select>
                    </label>
                </div>

                <div class="CustomerTable">
                    <table style="width: 125%">
                        <thead>
                        <tr>
                            <th>S.No</th>
                            <th>Organization Name</th>
                            <th>Contact Person Name</th>
                            <th>Email ID</th>
                            <th>Mobile Number</th>
                            <th>Client Code</th>
                            <th>Registered On</th>
                            <th>Recurring</th>
                            <th>Subscription Status</th>
                            <th>action</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td align="center" colspan="10">
                                <h1>
                                    <center>Sorry, No data found</center>
                                </h1>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            {% elif filter %}
            <div class="TableList">
                <div class="CountExportArea">
                    <a href="{% url 'adminpanel:export-organization-data' %}" class="Export"><i
                            class="fa fa-file-excel-o"></i> Export </a>
                    <label>
                        Show per page
                        <select>
                            <option>5</option>
                            <option>10</option>
                            <option>20</option>
                            <option>50</option>
                            <option>100</option>
                        </select>
                    </label>
                </div>

                <div class="CustomerTable">
                    <table style="width: 125%">
                        <thead>
                        <tr>
                            <th>S.No</th>
                            <th>Organization Name</th>
                            <th>Contact Person Name</th>
                            <th>Email ID</th>
                            <th>Mobile Number</th>
                            <th>Client Code</th>
                            <th>Registered On</th>
                            <th>Recurring</th>
                            <th>Subscription Status</th>
                            <th>action</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for object in filter %}
                        <tr>
                            <td>{{forloop.counter}}</td>
                            <td>{{object.organization_name.organization_name}}</td>
                            <td>{{object.organization_name.first_name}} {{object.organization_name.last_name}}</td>
                            <td>{{object.organization_name.email}}</td>
                            <td>{{object.organization_name.mobile_number}}</td>
                            <td>{{object.organization_name.client_code}}</td>
                            <td>{{object.organization_name.created_at}}</td>
                            <td>Yes</td>
                            <td>
                                {% if object.active %}
                                <span class="green">Active</span>
                                {% else %}
                                <span class="red">InActive</span>
                                {% endif %}

                            </td>
                            <td>
                                <div class="Actions">
                                    {% if object.organization_name.active %}
                                    <label class="Switch">
                                        <input type="checkbox" onclick="activeInacitve({{object.organization_name.id}})"
                                               checked/>
                                        <span class="slider"></span>
                                    </label>
                                    {% else %}
                                    <label class="Switch">
                                        <input type="checkbox"
                                               onclick="activeInacitve({{object.organization_name.id}})"/>
                                        <span class="slider"></span>
                                    </label>
                                    {% endif %}
                                    <button class="Green organizationEdit"
                                             id="{{object.organization_name.id}}"
                                            value="{{object.organization_name.id}}">
                                        <i class="fa fa-pencil-square-o"
                                           onclick="editValue({{object.organization_name.id}})"></i>
                                    </button>

                                    <button class="Red" data-toggle="modal"
                                            data-target="#DeleteModal"
                                            onclick="deleteValue({{object.organization_name.id}})">
                                        <i class="fa fa-trash"></i>
                                    </button>

                                    <a class="Blue" href="JavaScript:Void(0);" data-toggle="modal"
                                       data-target="#PasswordModal">
                                        <i class="fa fa-unlock-alt"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            {% elif pages %}
            <div class="TableList">
                <div class="CountExportArea">
                    <a href="{% url 'adminpanel:export-organization-data' %}" class="Export"><i
                            class="fa fa-file-excel-o"></i> Export </a>
                    <label>
                        Show per page
                        <select>
                            <option>5</option>
                            <option>10</option>
                            <option>20</option>
                            <option>50</option>
                            <option>100</option>
                        </select>
                    </label>
                </div>
                <div class="CustomerTable">
                    <table style="width: 125%">
                        <thead>
                        <tr>
                            <th>S.No</th>
                            <th>Organization Name</th>
                            <th>Contact Person Name</th>
                            <th>Email ID</th>
                            <th>Mobile Number</th>
                            <th>Client Code</th>
                            <th>Registered On</th>
                            <th>Recurring</th>
                            <th>Subscription Status</th>
                            <th>Action</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for object in pages %}
                        <tr>
                            <td>{{forloop.counter}}</td>
                            <td>{{object.organization_name.organization_name}}</td>
                            <td>{{object.organization_name.first_name}} {{object.organization_name.last_name}}</td>
                            <td>{{object.organization_name.email}}</td>
                            <td>{{object.organization_name.mobile_number}}</td>
                            <td>{{object.organization_name.client_code}}</td>
                            <td>{{object.organization_name.created_at}}</td>
                            <td>Yes</td>
                            <td>
                                {% if object.active %}
                                <span class="green">Active</span>
                                {% else %}
                                <span class="red">InActive</span>
                                {% endif %}
                            </td>
                            <td>
                                <div class="Actions">
                                    {% if object.organization_name.active %}
                                    <label class="Switch">
                                        <input type="checkbox" onclick="activeInacitve({{object.organization_name.id}})"
                                               checked/>
                                        <span class="slider"></span>
                                    </label>
                                    {% else %}
                                    <label class="Switch">
                                        <input type="checkbox"
                                               onclick="activeInacitve({{object.organization_name.id}})"/>
                                        <span class="slider"></span>
                                    </label>
                                    {% endif %}
                                    <button class="Green organizationEdit"
                                             id="{{object.organization_name.id}}"
                                            value="{{object.organization_name.id}}">
                                        <i class="fa fa-pencil-square-o"
                                           onclick="editValue({{object.organization_name.id}})"></i>
                                    </button>
                                    <a class="Red" href="JavaScript:Void(0);" data-toggle="modal"
                                       data-target="#DeleteModal"
                                       onclick="deleteValue({{object.organization_name.id}})">
                                        <i class="fa fa-trash"></i>
                                    </a>
                                    <a class="Blue" href="JavaScript:Void(0);" data-toggle="modal"
                                       data-target="#PasswordModal">
                                        <i class="fa fa-unlock-alt"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            {% else %}
            <div class="TableList">
                <div class="CountExportArea">
                    <a href="{% url 'adminpanel:export-organization-data' %}" class="Export"><i
                            class="fa fa-file-excel-o"></i> Export </a>
                    <label>
                        Show per page
                        <select>
                            <option>5</option>
                            <option>10</option>
                            <option>20</option>
                            <option>50</option>
                            <option>100</option>
                        </select>
                    </label>
                </div>
                <div class="CustomerTable">
                    <table style="width: 125%">
                        <thead>
                        <tr>
                            <th>S.No</th>
                            <th>Organization Name</th>
                            <th>Contact Person Name</th>
                            <th>Email ID</th>
                            <th>Mobile Number</th>
                            <th>Client Code</th>
                            <th>Registered On</th>
                            <th>Recurring</th>
                            <th>Subscription Status</th>
                            <th>action</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for object in object_list %}
                        <tr>
                            <td>{{forloop.counter}}</td>
                            <td>{{object.organization_name.organization_name}}</td>
                            <td>{{object.organization_name.first_name}} {{object.organization_name.last_name}}</td>
                            <td>{{object.organization_name.email}}</td>
                            <td>{{object.organization_name.mobile_number}}</td>
                            <td>{{object.organization_name.client_code}}</td>
                            <td>{{object.organization_name.created_at}}</td>
                            <td>Yes</td>
                            <td>
                                {% if object.active %}
                                <span class="green">Active</span>
                                {% else %}
                                <span class="red">InActive</span>
                                {% endif %}
                            </td>
                            <td>
                                <div class="Actions">
                                    {% if object.organization_name.active %}
                                    <label class="Switch">
                                        <input type="checkbox" onclick="activeInacitve({{object.organization_name.id}})"
                                               checked/>
                                        <span class="slider"></span>
                                    </label>
                                    {% else %}
                                    <label class="Switch">
                                        <input type="checkbox"
                                               onclick="activeInacitve({{object.organization_name.id}})"/>
                                        <span class="slider"></span>
                                    </label>
                                    {% endif %}
                                    <button class="Green organizationEdit"
                                             id="{{object.organization_name.id}}"
                                            value="{{object.organization_name.id}}">
                                        <i class="fa fa-pencil-square-o"
                                           onclick="editValue({{object.organization_name.id}})"></i>
                                    </button>
                                    <a class="Red" href="JavaScript:Void(0);" data-toggle="modal"
                                       data-target="#DeleteModal"
                                       onclick="deleteValue({{object.organization_name.id}})">
                                        <i class="fa fa-trash"></i>
                                    </a>
                                    <a class="Blue" href="JavaScript:Void(0);" data-toggle="modal"
                                       data-target="#PasswordModal">
                                        <i class="fa fa-unlock-alt"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            {% endif %}
            <!--            <div class="Pagination">-->
            <!--                <ul>-->
            <!--                    <li><a href="#">Previous</a></li>-->
            <!--                    <li class="active"><a href="#">1</a></li>-->
            <!--                    <li><a href="#">2</a></li>-->
            <!--                    <li><a href="#">3</a></li>-->
            <!--                    <li><a href="#">Next</a></li>-->
            <!--                </ul>-->
            <!--            </div>-->
            {% if pages.has_other_pages %}
            <div class="Pagination">
                <ul>
                    {% if pages.has_previous %}
                    <li class="page-item"><a aria-label="Previous" class="page-link"
                                             href="?page={{ pages.previous_page_number }}">Previous</a></li>
                    {% else %}
                    <li class="page-item disabled"><a href="javaScript:void(0)"><span>&laquo;</span></a> </li>
                    {% endif %}
                    {% for i in pages.paginator.page_range %}
                    {% if pages.number == i %}
                    <li class="page-item active"><a href="javaScript:void(0)"><span>{{ i }} <span class="sr-only">(current)</span></span></a></li>
                    {% else %}
                    <li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
                    {% endif %}
                    {% endfor %}
                    {% if pages.has_next %}
                    <li class="page-item"><a aria-label="Next" class="page-link"
                                             href="?page={{ pages.next_page_number }}">Next</a>
                    </li>
                    {% else %}
                    <li class="page-item disabled"><a href="javaScript:void(0)"><span>&raquo;</span></a></li>
                    {% endif %}
                </ul>
            </div>
            {% endif %}

        </div>

    </div>
</div>

<div class="ModalBox">

    <div class="modal" id="DeleteModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="Decline">
                        <a href="JavaScript:Void(0);" data-dismiss="modal" class="CloseModal">×</a>
                        <h3>Delete</h3>
                        <p>Are you sure you want to delete this Organization ?</p>
                        <h4>
                            <a href="JavaScript:Void(0);" data-dismiss="modal">No</a>
                            <button id="modal_delete_button" data-dismiss="modal">Yes</button>
                        </h4>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="ActiveModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="Decline">
                        <a href="JavaScript:Void(0);" data-dismiss="modal" class="CloseModal">×</a>
                        <h3>Active</h3>
                        <p>Are you sure you want to active this Organization?</p>
                        <h4>
                            <a href="JavaScript:Void(0);" data-dismiss="modal" id="active_button_no">No</a>
                            <a id="active_button" href="JavaScript:Void(0);" data-dismiss="modal">Yes</a>
                        </h4>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="InactiveModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="Decline">
                        <a href="JavaScript:Void(0);" data-dismiss="modal" class="CloseModal">×</a>
                        <h3>Inactive</h3>
                        <p>Are you sure you want to inactive this Organization?</p>
                        <h4>
                            <a href="JavaScript:Void(0);" data-dismiss="modal" id="inactive_button_no">No</a>
                            <a id="inactive_button" href="JavaScript:Void(0);" data-dismiss="modal">Yes</a>
                        </h4>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="modal" id="EditModal">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-body">
                    <div class="Category">
                        <a href="javascript:void(0);" class="CloseModal" data-dismiss="modal">&times;</a>
                        <h3>Edit Organization </h3>
                        <div class="content-wrapper" id="editerror">

                        </div>
                        <form method="post">
                            {% csrf_token %}
                            <div id="object_id_placeholder_div">
                                <input hidden="true" id="object_id_placeholder_input" value="">
                            </div>
                            <div class="form-group">
                                <label>Organization Name</label>
                                <input type="text" class="form-control" placeholder="Enter Organization Name"
                                       name="organization_name" required id="edit_organization_name"
                                       >
                            </div>

                            <div class="form-group">
                                <label>Person First Name <sup>*</sup> </label>
                                <input type="text" class="form-control" placeholder="Enter First Name" value="{{organization_detail_obj.first_name}}"
                                       name="first_name" id="edit_first_name" required>
                            </div>

                            <div class="form-group">
                                <label>Person Last Name <sup>*</sup> </label>
                                <input type="text" class="form-control" placeholder="Enter Last Name" value="{{organization_detail_obj.last_name}}"
                                       name="last_name" required id="edit_last_name">
                            </div>

                            <div class="form-group">
                                <label>Email ID <sup>*</sup> </label>
                                <input type="text" class="form-control" placeholder="Enter Email Address"
                                       value="{{organization_detail_obj.email}}" required name="email" id="edit_email">
                            </div>

                            <div class="form-group">
                                <label>Mobile Number <sup>*</sup> </label>
                                <input type="text" class="form-control" placeholder="Enter Mobile Number"
                                       value="{{organization_detail_obj.organization_name}}" name="mobile_number" required id="edit_mobile_number">
                            </div>
                        </form>

                        <!--                            <div class="form-group">-->
                        <!--                                <label class="CheckBox">Make Inactive-->
                        <!--                                    <input type="checkbox">-->
                        <!--                                    <span class="checkmark"></span>-->
                        <!--                                </label>-->
                        <!--                            </div>-->

                        <button class="Button" type="button" onclick="editOrganization()">Submit</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="PasswordModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="Category">
                        <a href="javascript:void(0);" class="CloseModal" data-dismiss="modal">&times;</a>
                        <h3>Organization Change Password </h3>

                        <div class="form-group">
                            <label>New Password</label>
                            <input type="password" class="form-control" placeholder="Enter Password" id="organization_password">
                        </div>

                        <div class="form-group">
                            <label>Confirm Password </label>
                            <input type="password" class="form-control" placeholder="Enter Confirm Password" id="confirm_organization_password">
                        </div>

                        <button class="Button" onclick="ValidatePassword()">Submit</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="AddModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="Category">
                        <a href="javascript:void(0);" class="CloseModal" data-dismiss="modal">&times;</a>
                        <h3>Add New Organization </h3>
                        <div class="content-wrapper" id="error">
                    
                        </div>
                        <form method="post">
                            {% csrf_token %}
                            <div class="form-group">
                                <label>Organization Name</label>
                                <input type="text" class="form-control" placeholder="Enter Organization Name"
                                       name="organization_name" id="organization_name" required>
                            </div>
                            <div class="form-group">
                                <label>Person First Name <sup>*</sup> </label>
                                <input type="text" class="form-control" placeholder="Enter First Name" name="first_name"
                                       id="first_name" required>
                            </div>
                            <div class="form-group">
                                <label>Person Last Name <sup>*</sup> </label>
                                <input type="text" class="form-control" placeholder="Enter Last Name" name="last_name"
                                       id="last_name" required>
                            </div>
                            <div class="form-group">
                                <label>Mobile Number <sup>*</sup> </label>
                                <input type="number" class="form-control" placeholder="Enter Mobile Number"
                                       name="mobile_number" id="mobile_number" required>
                            </div>
                            <div class="form-group">
                                <label>Email Id <sup>*</sup> </label>
                                <input type="email" class="form-control" placeholder="Enter Email Id" name="email"
                                       id="email" required>
                            </div>
                            <div class="form-group">
                                <label class="CheckBox">Make Inactive
                                    <input type="checkbox" name="active" id="active">
                                    <span class="checkmark"></span>
                                </label>
                            </div>
                        </form>
                        <button class="Button Cancel" data-toggle="modal" data-dismiss="modal" class="CloseModal">Cancel</button>
                        <button class="Button" onclick="createOrganiztion()">Save</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
function validateEmail(email) {
    const re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(String(email).toLowerCase());
}
</script>
<script>
    function ValidatePassword(){
    var organization_password = $('#organization_password').val();
    var confirm_organization_password = $('#confirm_organization_password').val();
    if (organization_password == '' || organization_password == null ){
        alert('Password cannot be blank')
    }
    else if ( confirm_organization_password == '' || confirm_organization_password == null) {
        alert('Confirm password cannot be blank')
    }

    else if (organization_password != confirm_organization_password){
        alert('Password and Confirm must be same')
    }
    else{
        $('#PasswordModal').modal('toggle');
    }

    }
</script>
<script>
    function createOrganiztion() {
    var organization_name = $('#organization_name').val();
    var first_name = $('#first_name').val();
    var last_name = $('#last_name').val();
    var mobile_number = $('#mobile_number').val();
    var email = $('#email').val();
    var password = $('#password').val();
    var check = document.getElementById("active").checked;
    if (organization_name =='' || organization_name == null || first_name=='' || first_name == null || last_name == '' || last_name == null || mobile_number == '' || mobile_number == null ){
        alert('One or more fields are blank. Please fill all the fields')
    }
    else if(validateEmail(email)==false){
        alert('Please enter an valid email address')
    }else{
        var url = "{% url 'adminpanel:create-organization' %}"

    $.ajax({
        url : url,
        method : 'POST',
        data:{
        organization_name:organization_name,
        first_name:first_name,
        last_name:last_name,
        mobile_number : mobile_number,
        email : email,
        check : check,
        password : password,
        csrfmiddlewaretoken: "{{ csrf_token }}"
        },
        success: function(data){
           console.log('inside success',data)
            var protocol = window.location.protocol
            var hostname = window.location.hostname
            var port = window.location.port
            var url = protocol + "//" + hostname + ":" + port + "/adminpanel" + "/customer-management" + "/"
            //alert("remember_me", remember_me)
            window.location.href = url
        },
        error: function(data) {
           data = data.responseJSON.message;
           error = document.getElementById('error')
           console.log('error',error)
           error.innerHTML = `<div class="alert alert-warning alert-dismissible" role="alert">
                            ${data}
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>`;
           $(document).ready(function() {
           $('#signup2').modal('toggle');
           });
        }
    });
    }
    
    event.preventDefault();
    }

















</script>

<script>
function editValue(id){
   var x = '#' + id
   var value =  $('#' + id).val();
   $("#object_id_placeholder_div").html(`<input hidden="true" id="object_id_placeholder_input" value="` + value + `">`)
    console.log('inside edit value and value is:',value)
   $('.CloseModal').click(function (e) {
        e.preventDefault();
//      $('.modal').removeClass('show');
    });
    sessionStorage.setItem('objId', id)
    var url = '{% url 'adminpanel:customer-detail' %}'

    $.ajax({
        url:url,
        method:'POST',
        data:{
            id:id,
            csrfmiddlewaretoken: "{{ csrf_token }}"
        },
        success:function(data){
            console.log(data)
            // document.write(data)
            console.log(data)
            var organization_name = data['organization_name']
            var first_name = data['first_name']
            var last_name = data['last_name']
            var email = data['email']
            var mobile_number = data['mobile_number']
            $(document).ready(function() {
                $('#EditModal').modal('show');
                edit_organization_name = document.getElementById('edit_organization_name')
                edit_organization_name.value =  organization_name
                edit_first_name = document.getElementById('edit_first_name')
                edit_first_name.value =  first_name
                edit_last_name = document.getElementById('edit_last_name')
                edit_last_name.value =  last_name
                edit_email = document.getElementById('edit_email')
                edit_email.value =  email
                edit_mobile_number = document.getElementById('edit_mobile_number')
                edit_mobile_number.value =  mobile_number
            });
        },
        error:function(){
            console.log('inside error')
        }
    })
};

function editOrganization(){
    var edit_organization_name = $('#edit_organization_name').val();
    var edit_first_name = $('#edit_first_name').val();
    var edit_last_name = $('#edit_last_name').val();
    var edit_email = $('#edit_email').val();
    var edit_mobile_number = $('#edit_mobile_number').val();
//  var obj_id = $('#object_id_placeholder_input').val();
    var obj_id = sessionStorage.getItem('objId');
    if (edit_organization_name == '' || edit_organization_name==null || edit_first_name == '' || edit_first_name==null || edit_last_name == '' || edit_last_name==null || edit_email == '' || edit_email==null || edit_mobile_number == '' || edit_mobile_number==null){
        alert('One or more fields are empty. Please fill the fields')
    }else{
        var url = '{% url 'adminpanel:edit-organization' %}'
      $.ajax({
        url: url,
        method : 'POST',
        data:{
            obj_id:obj_id,
            edit_organization_name:edit_organization_name,
            edit_first_name:edit_first_name,
            edit_last_name:edit_last_name,
            edit_email:edit_email,
            edit_mobile_number:edit_mobile_number,
            csrfmiddlewaretoken: "{{ csrf_token }}"
        },
      success: function(data){
        console.log('inside success',data)
            var protocol = window.location.protocol
            var hostname = window.location.hostname
            var port = window.location.port
            var url = protocol + "//" + hostname + ":" + port + "/adminpanel" + "/customer-management" + "/"
            sessionStorage.removeItem('objId')
            window.location.href = url

        },
      error: function(data){
      data = data.responseJSON.message;
           error = document.getElementById('editerror')
           console.log('error',error)
           error.innerHTML = `<div class="alert alert-warning alert-dismissible" role="alert">
                            ${data}
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>`;
           $(document).ready(function() {
           $('#signup2').modal('toggle');
           });

      },
      })
    }
    console.log(obj_id)
}







</script>
<script>
function deleteValue(id){
    sessionStorage.setItem('deleteObjId', id)
};





</script>
<script>
    function activeInacitve(id){
        sessionStorage.setItem('sliderObjId', id)
        // $("#ActiveModal").modal("show");
        // $(this).removeAttr("checked");
    };
     $("#inactive_button").click(function () {
        var object_id = sessionStorage.getItem('sliderObjId')
        console.log('Id ',object_id)
        var protocol = window.location.protocol
        var hostname = window.location.hostname
        var port = window.location.port
        var url = protocol + "//" + hostname + ":" + port + "/adminpanel" + "/inactive-organization" + "/" + object_id + "/"
        sessionStorage.removeItem('sliderObjId')
        window.location.href = url
    });
     $("#active_button").click(function () {
        var object_id = sessionStorage.getItem('sliderObjId')
        console.log('Id ',object_id)
        var protocol = window.location.protocol
        var hostname = window.location.hostname
        var port = window.location.port
        var url = protocol + "//" + hostname + ":" + port + "/adminpanel" + "/inactive-organization" + "/" + object_id + "/"
        sessionStorage.removeItem('sliderObjId')
        window.location.href = url
    });





</script>
<script>
 $("#modal_delete_button").click(function () {
        var object_id = sessionStorage.getItem('deleteObjId')
        console.log('Id ',object_id)
        var protocol = window.location.protocol
        var hostname = window.location.hostname
        var port = window.location.port
        var url = protocol + "//" + hostname + ":" + port + "/adminpanel" + "/delete-organization" + "/" + object_id + "/"
        sessionStorage.removeItem('deleteObjId')
        window.location.href = url
    });






</script>
<script>
     $("#active_button_no").click(function () {
        location.reload();
    });
    $("#inactive_button_no").click(function () {
        location.reload();
    });
</script>
{% endblock body %}